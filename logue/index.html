<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MC Addons Web</title>
    <style>
        /* Estilos base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Anti-selecci贸n de texto */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
        }
        
        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: sans-serif;
        }

        /* Contenedor del Iframe */
        .chat-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; 
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* Pantalla de Carga y Bloqueo */
        #status-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            text-align: center;
            padding: 20px;
        }

        .loader {
            border: 4px solid #333;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-icon {
            display: none;
            font-size: 50px;
            color: #ff4d4d;
            margin-bottom: 20px;
        }

        #status-text {
            font-size: 18px;
            max-width: 500px;
            line-height: 1.5;
        }

        .policy-desc {
            margin-top: 15px;
            font-size: 14px;
            color: #aaa;
            display: none;
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="status-overlay">
        <div id="loader" class="loader"></div>
        <div id="error-icon" class="error-icon"></div>
        <div id="status-text">Cargando app...</div>
        <div id="policy-text" class="policy-desc">
            <strong>Acceso restringido: Bloqueador detectado.</strong><br><br>
            Los bloqueadores de anuncios no est谩n permitidos por razones de plataforma. 
            Al tenerlo activo, puede afectar a la aplicaci贸n; aunque ella misma no contenga anuncios, 
            los DNS, bloqueadores de anuncios, VPN y dem谩s pueden afectar el correcto funcionamiento de la plataforma.
        </div>
    </div>

    <div id="main-app" class="chat-container">
        <iframe src="https://script.google.com/macros/s/AKfycbwalGEgPGHlAKnivJWmfKyTRzNradQMCL4biioEY9KrpXX-u6qvLDpKBosXpGpf5OLo/exec" allow="clipboard-read; clipboard-write"></iframe>
    </div>

    <script>
        (function() {
            // URL a la que se redirigir谩 si intentan inspeccionar
            const redirectUrl = "https://www.google.com";

            // 1. Bloqueo de teclas de atajo (F12, Ctrl+Shift+I, Ctrl+U, etc.)
            document.addEventListener('keydown', function(e) {
                if (
                    e.keyCode === 123 || // F12
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74 || e.keyCode === 67)) || // Ctrl+Shift+I/J/C
                    (e.ctrlKey && e.keyCode === 85) || // Ctrl+U (Ver c贸digo fuente)
                    (e.ctrlKey && e.keyCode === 83)    // Ctrl+S (Guardar p谩gina)
                ) {
                    e.preventDefault();
                    window.location.href = redirectUrl;
                    return false;
                }
            });

            // 2. Detecci贸n de apertura de consola por cambio de dimensiones
            // Si la diferencia entre el ancho/alto externo e interno es grande, la consola est谩 abierta.
            setInterval(function() {
                const threshold = 160;
                const widthThreshold = window.outerWidth - window.innerWidth > threshold;
                const heightThreshold = window.outerHeight - window.innerHeight > threshold;
                
                if (widthThreshold || heightThreshold) {
                    window.location.href = redirectUrl;
                }
            }, 1000);

            // 3. Protecci贸n mediante 'debugger' infinito
            // Esto congela la pesta帽a si la consola se llega a abrir de alguna forma.
            (function() {
                (function recursive() {
                    try {
                        (function check(i) {
                            if (("" + i / i).length !== 1 || i % 20 === 0) {
                                (function() {}).constructor("debugger")();
                            } else {
                                debugger;
                            }
                            check(++i);
                        })(0);
                    } catch (e) {
                        setTimeout(recursive, 5);
                    }
                })();
            })();
        })();
    </script>

    <script>
        async function checkAdBlocker() {
            const statusText = document.getElementById('status-text');
            const policyText = document.getElementById('policy-text');
            const loader = document.getElementById('loader');
            const errorIcon = document.getElementById('error-icon');
            const appContainer = document.getElementById('main-app');
            const overlay = document.getElementById('status-overlay');

            const googleAdsUrl = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
            
            try {
                const response = await fetch(new Request(googleAdsUrl), {
                    method: 'HEAD',
                    mode: 'no-cors',
                    cache: 'no-store'
                });

                overlay.style.display = 'none';
                appContainer.style.display = 'block';

            } catch (error) {
                loader.style.display = 'none';
                errorIcon.style.display = 'block';
                statusText.style.display = 'none';
                policyText.style.display = 'block';
                console.log("AdBlock detectado o error de conexi贸n:", error);
            }
        }

        window.onload = checkAdBlocker;
    </script>

</body>
</html>
