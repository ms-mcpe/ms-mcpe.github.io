<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MC Addons Oficial</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffd700">
    <meta name="description" content="Descarga los mejores complementos para Minecraft Bedrock gratis en Android y PC.">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --gold: #ffd700;
            --gold-glow: rgba(255, 215, 0, 0.4);
            --bg: #030303;
            --card-bg: rgba(15, 15, 15, 0.85);
            --accent: #00ff88;
            --danger: #ff3e3e;
            --text: #e0e0e0;
        }

        /* Bloqueo de selección y cursor */
        * {
            box-sizing: border-box;
            margin: 0; padding: 0;
            user-select: none;
            -webkit-user-drag: none;
        }

        body {
            background-color: var(--bg);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 136, 0.05) 0%, transparent 40%);
            color: var(--text);
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        /* Partículas de Fondo */
        #particles-js {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
        }

        .container {
            width: 95%;
            max-width: 450px;
            perspective: 1000px;
            padding: 20px;
        }

        /* Tarjeta Principal Estilo Cristal */
        .app-card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 32px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.8), 0 0 20px var(--gold-glow);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        /* Brillo animado en el borde */
        .app-card::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: conic-gradient(transparent, transparent, transparent, var(--gold));
            animation: rotate 6s linear infinite;
            z-index: -1;
            opacity: 0.3;
        }

        @keyframes rotate { 100% { transform: rotate(360deg); } }

        .app-logo {
            width: 110px;
            height: 110px;
            border-radius: 26px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 15px var(--gold-glow));
            animation: float 4s ease-in-out infinite;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #fff 30%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .app-info {
            font-size: 0.9rem;
            color: #aaa;
            line-height: 1.5;
            margin-bottom: 25px;
        }

        .platforms {
            display: flex;
            justify-content: center;
            gap: 15px;
            font-size: 0.8rem;
            margin-bottom: 25px;
            color: var(--gold);
        }

        /* Estadísticas Profesionales */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            background: rgba(255,255,255,0.03);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            margin-bottom: 25px;
        }
        .stat-box { display: flex; flex-direction: column; }
        .stat-num { font-family: 'Orbitron', sans-serif; font-size: 1.1rem; font-weight: 900; }
        .stat-desc { font-size: 0.65rem; text-transform: uppercase; color: #777; margin-top: 4px; }

        /* Botón de Instalación Maestro */
        .btn-install-main {
            display: none; /* Se activa vía JS */
            width: 100%;
            padding: 20px;
            background: linear-gradient(90deg, #b8860b, var(--gold), #b8860b);
            background-size: 200% auto;
            color: #000;
            border: none;
            border-radius: 16px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: 0.4s;
            margin-bottom: 15px;
            animation: shine 3s linear infinite;
        }

        .btn-install-main:hover { transform: scale(1.03); filter: brightness(1.2); }

        /* Botones de Voto */
        .vote-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .btn-vote {
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: #fff;
            cursor: pointer;
            transition: 0.3s;
            font-weight: 600;
        }
        .btn-vote:hover { background: rgba(255,255,255,0.15); }
        .active-like { background: var(--accent) !important; color: #000 !important; }
        .active-dislike { background: var(--danger) !important; color: #fff !important; }

        .security-badge {
            margin-top: 25px;
            font-size: 0.75rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            opacity: 0.8;
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes shine { to { background-position: 200% center; } }

    </style>
</head>
<body oncontextmenu="return false;">

    <div id="particles-js"></div>

    <div class="container">
        <div class="app-card" id="main-content">
            <img src="https://ms-mcpe.github.io/logue/icon-192.png" class="app-logo" alt="MC Addons">
            
            <h1>MC ADDONS</h1>
            
            <p class="app-info">
                La herramienta definitiva para <b>Minecraft Bedrock</b>. 
                Descarga addons, texturas y mapas totalmente gratis.
            </p>

            <div class="platforms">
                <span><i class="fab fa-android"></i> Android</span>
                <span><i class="fab fa-windows"></i> Windows PC</span>
                <span><i class="fas fa-globe"></i> Web</span>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <span id="stat-dls" class="stat-num">...</span>
                    <span class="stat-desc">Installs</span>
                </div>
                <div class="stat-box">
                    <span id="stat-likes" class="stat-num" style="color:var(--accent)">...</span>
                    <span class="stat-desc">Positive</span>
                </div>
                <div class="stat-box">
                    <span id="stat-dislikes" class="stat-num" style="color:var(--danger)">...</span>
                    <span class="stat-desc">Negative</span>
                </div>
            </div>

            <button id="pwa-install-btn" class="btn-install-main">
                <i class="fas fa-download"></i> INSTALAR APP
            </button>

            <div class="vote-row">
                <button class="btn-vote" id="btn-like" onclick="votar('like')">
                    <i class="fas fa-heart"></i> Me gusta
                </button>
                <button class="btn-vote" id="btn-dislike" onclick="votar('dislike')">
                    <i class="fas fa-thumbs-down"></i> Disgusto
                </button>
            </div>

            <div class="security-badge">
                <i class="fas fa-shield-check"></i> Conexión Encriptada & Libre de Infecciones
            </div>

            <div style="margin-top:20px; font-size:0.6rem; color:#555;">
                © 2026 JR-TechStudios. Myst. <br> Protegido
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // --- CONFIGURACIÓN DE SEGURIDAD ---
        // Bloquear teclas de desarrollador
        document.onkeydown = function(e) {
            if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0))) || (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0))) {
                return false;
            }
        };

        // --- LÓGICA DE DATOS (Google Sheets) ---
        const scriptURL = "https://script.google.com/macros/s/AKfycby3vNGr6QKFMIyl0TdReMuS3UCAEoMxbqO17SKz1OizRp6BgfOxdbqbMqPhBU0d8OQDYw/exec";

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num;
        }

        async function cargarStats() {
            try {
                const res = await fetch(scriptURL + "?action=read");
                const data = await res.json();
                document.getElementById('stat-dls').innerText = formatNumber(data.descargas);
                document.getElementById('stat-likes').innerText = formatNumber(data.likes);
                document.getElementById('stat-dislikes').innerText = formatNumber(data.dislikes);
            } catch (e) { console.log("Cargando..."); }
        }

        function registrar(tipo) {
            fetch(scriptURL + "?action=" + tipo, { mode: 'no-cors' });
        }

        // --- LÓGICA DE VOTOS ---
        function votar(tipo) {
            if(localStorage.getItem('mc_voted')) return alert("Ya has valorado esta aplicación.");
            
            const btn = tipo === 'like' ? document.getElementById('btn-like') : document.getElementById('btn-dislike');
            btn.classList.add(tipo === 'like' ? 'active-like' : 'active-dislike');
            
            registrar(tipo);
            localStorage.setItem('mc_voted', 'true');
            
            // Actualización visual rápida
            let el = document.getElementById(tipo === 'like' ? 'stat-likes' : 'stat-dislikes');
            let val = parseInt(el.innerText) || 0;
            el.innerText = formatNumber(val + 1);
        }

        // --- SISTEMA PWA (Instalación) ---
        let deferredPrompt;
        const installBtn = document.getElementById('pwa-install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    registrar('descarga');
                    installBtn.style.display = 'none';
                }
                deferredPrompt = null;
            }
        });

        // --- INICIALIZACIÓN ---
        window.addEventListener('DOMContentLoaded', () => {
            cargarStats();
            // Configuración estética de partículas
            particlesJS('particles-js', {
                "particles": {
                    "number": { "value": 40 },
                    "color": { "value": "#ffd700" },
                    "shape": { "type": "circle" },
                    "opacity": { "value": 0.2 },
                    "size": { "value": 3 },
                    "move": { "enable": true, "speed": 1 }
                },
                "interactivity": { "events": { "onhover": { "enable": true, "mode": "repulse" } } }
            });
        });
    </script>
</body>
</html>
